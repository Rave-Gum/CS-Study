<strong>목차</strong>

[1. OSI 7계층](#OSI-7계층)

[2. TCP-IP](#TCP-IP)

[3. TCP](#TCP)

[4. UDP](#UDP)



## OSI 7계층

OSI는 Open Systems Interconnection의 약자로 국제 표준화 기구에서 1984년에 발표했다.

통신이 일어나는 과정을 7단계로 구분하여 통신하는 과정을 단계별로 파악할 수 있다.

프로토콜의 표준적인 뼈대 제공을 위해 개발되었다.

각 계층은 독립되어 있어 한 계층이 고장나면 고장난 계층만을 고칠 수 있다.

![1](https://user-images.githubusercontent.com/59406960/110309624-ed29c080-8044-11eb-9314-1036a96f4b00.png)

<h4>1계층 - 물리계층</h4>

- 통신 케이블로 데이터를 전송한다.

- 통신 단위는 비트이다.

- 데이터의 전달만 할 뿐 데이터가 무엇인지, 에러가 있는지 등은 신경쓰지 않는다.

- 케이블, 리피터, 허브, 모뎀 등이 있다.



<h4>2계층 - 데이터 링크 계층</h4>

- 직접 연결된 서로 다른 2개의 네트워크 장치간 데이터 전송을 담당한다.

- 통신 단위는 프레임이다.

- 맥 주소를 가지고 통신을 한다.

- 흐름 제어, 오류 제어, 접근 제어, 동기화의 역할을 한다.

- 브리지, 스위치 등이 있다.



<h4>3계층 - 네트워크 계층</h4>

- 데이터를 목적지까지 안전하고 빠르게 전달하는 라우팅 기능을 가지고 있다.
- 라우팅 기능은 주소를 정하고 경로를 설정하여 패킷을 전달해주는 것이다.
- 통신 단위는 패킷이다.
- 라우팅, 흐름 제어, 세그멘테이션, 오류 제어, 인터네트워킹 등을 수행한다.



<h4>4계층 - 전송 계층</h4>

- 통신을 활성화 하기 위해 프로토콜을 이용하여, 포트를 열어 응용 프로그램을 전송할 수 있게 한다.
- TCP프로토콜과 UDP 프로토콜이 있다.
- 종단간(end-to-end) 신뢰성 있고 효율적인 데이터 전송을 한다.



<h4>5계층 - 세션 계층</h4>

- 데이터가 통신하기 위한 논리적인 연결을 한다.
- 세션 설정, 유지, 종료, 복구 등의 기능이 있다.
- TCP/IP 세션을 만들고 없애는 역할을 한다.



<h4>6계층 - 표현 계층</h4>

- 데이터 표현이 상이한 응용 프로세스의 독립성을 제공하고 암호화 한다.
- MIME 인코딩이나 암호화 등의 동작을 한다.



<h4>7계층 - 응용 계층</h4>

- 최종 목적지로 HTTP, FTP, SMTP Telnet 등과 같은 프로토콜이 있다.
- 응용 프로세스와 직접 관계하여 응용 서비스를 수행한다.



## TCP-IP

TCP/IP는 데이터 통신 규약으로 OSI 참조 모델을 기반으로 단순화하여 만들어졌다.

OSI 모델을 참조하여 만들어 졌기 때문에 호환성이 뛰어나고, 각 계층 별 문제 해결이 용이하고, 독립적으로 이루어져 있다.



<h4>1계층 - 네트워크 액세스</h4>

물리적인 네트워크를 통한 실제적인 데이터 전송을 담당한다.

데이터를 송수신하는 네트워크 하드웨어, 운영체제의 드라이버 등으로 구성되어 있다.

물리적 주소를 사용하여 통신을 수행한다.



<h4>2계층 - 인터넷 계층</h4>

전송 계층에서 내려온 데이터를 종단 시스템까지 전달하는 역할을 한다.

이 계층에서는 물리 주소를 사용하지 않고 논리 주소인 IP주소를 사용한다.

데이터를 전송하기 위해 전송 경로를 지정하는 라우팅 작업을 수행한다.



<h4>3계층 - 전송 계층</h4>

통신의 목적지를 지정하고 오류 없이 데이터를 전송하는 역할을 한다.

통신의 목적지는 컴퓨터가 아닌 해당 컴퓨터에서 실행되는 프로그램(프로세스)이므로 이 프로세스를 지정해주는 포트 번호이다.



<h4>4계층 - 애플리케이션 계층</h4>

사용자와 가장 가까운 계층으로 사용자가 애플리케이션과 소통할 수 있게 해준다.

응용 프로그램들이 데이터를 교환하기 위해 사용되는 프로토콜을 정의한다.

- HTTP
- FTP
- SMTP

TCP/IP 네트워크를 사용하거나 관리하는 것을 도와주는 프로토콜이다.



## TCP

전송계층의 연결형 서비스이다.

데이터의 전송 순서를 보장한다.

데이터 흐름 제어와 혼잡 제어의 기능을 한다.

통신하는 두 단말기가 동시에 양방향으로 데이터를 전송할 수 있는 전이중 전송 방식을 사용한다.

두 단말기를 직접 연결하기 때문에 점대점 방식을 사용한다.

연결형 서비스이기 때문에 UDP보다 전송속도가 느리다.

클라이언트와 서버를 연결하기 위해 3-way-handshake 방식을 사용하고, 연결을 종료하기 위해 4-way-handshake 방식을 사용한다.

3-way-handshake은 클라이언트와 서버를 연결하기 위해 사용하는 방식이다.

![2](https://user-images.githubusercontent.com/59406960/110309618-ebf89380-8044-11eb-89c6-4adc6a47e9c5.png)

- 클라이언트에서 서버로 SYN 신호를 보내고 자신은 SYN-SENT 상태가 된다.

- 서버에서는 SYN를 받고 클라이언트로 SYN와 ACK 신호를 보내며 자신은 SYN-RECEIVED 상태가 된다.

- 클라이언트는 SYN와 ACK를 받고 서버로 ACK를 보내며 자신은 ESTABLISHED 상태가 되며 연결이 되었다고 판단한다.

- 서버도 ACK를 받고 ESTABLISHED 상태가 되며 연결이 되었다고 판단한다.



4-way-handshake은 클라이언트와 서버의 연결을 해제하기 위해 사용하는 방식이다.

![3](https://user-images.githubusercontent.com/59406960/110309627-edc25700-8044-11eb-946f-213f63f377f6.png)

- 연결이 되어있는 상태에서 클라이언트가 서버로 FIN 신호를 보내며 자신은 FIN-WAIT-1상태가 된다.

- 서버에서는 클라이언트의 FIN 신호를 받고 ACK 신호를 보내며 자신은 CLOSE-WAIT 상태가 된다.

- 서버에서 통신이 끝나 연결을 종료할 준비가 끝나면 클라이언트로 FIN 신호를 보내며 자신은 LAST-ACK 상태가 된다.

- 클라이언트에서는 서버의 FIN 신호를 받고 ACK 신호를 보내며 자신은 TIME-WAIT 상태가 된다.
  - TIME-WAIT상태가 되는 이유는 클라이언트에서 세션을 종료시킨 후 도착하는 패킷이 있을 수 있어 종료한 후 일정 시간 동안 세션을 남겨놓고 도착하지 않은 패킷을 기다리는 과정을 거치기 때문이다.

- 서버에서 클라이언트의 ACK 신호를 받으면 연결을 종료시킨다.



## UDP

전송계층의 비연결 지향적 프로토콜이다.

비연결 지향적 프로토콜이란 수신자와의 연결 절차 없이 발신자가 일방적으로 데이터를 보내는 것을 의미한다.

수신자와의 연결이 없기 때문에 TCP보다 훨씬 빠른 전송이 가능하지만 연결이 없어 신뢰성이 TCP보다 떨어진다.

또한 패킷 순서를 보장해주지 않는다.

오류 제어는 CheckSum으로 최소한의 오류 검토만을 해준다.



<h4>QUIC</h4>

QUIC는 Quick UDP Internet Connections의 약자이다.

기존 TCP + TLS 방식은 3-way-handshake와 암호화 작업을 하기 때문에 RTT가 높아 시간이 오래 걸린다.

반면 QUIC는 UDP 위에서 동작하기 때문에 암호화 과정이 생략되어 RTT가 매우 낮다.

또한 UDP의 부족한 신뢰성을 채우기 위해 자체적으로 보안 기능을 제공한다.



<strong>출처</strong>

-  [https://jhnyang.tistory.com/194](https://jhnyang.tistory.com/194)

- [네트워크 쉽게 이해하기 22편](https://mindnet.tistory.com/entry/%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC-%EC%89%BD%EA%B2%8C-%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0-22%ED%8E%B8-TCP-3-WayHandshake-4-WayHandshake)
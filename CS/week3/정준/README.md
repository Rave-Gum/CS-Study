## OS 개요
- 운영체제란
    - 하드웨어를 관리하고, 응용 프로그램과 하드웨어 사이에서 인터페이스 역할을 하며 시스템의 동작을 제어하는 시스템 소프트웨어
    - 시스템의 자원과 동작을 관리하는 소프트웨어
- 운영체제 기능
    - 프로세스 관리
    - 저장장치 관리
    - 네트워킹
    - 사용자 관리
    - 디바이스 드라이버

## 프로세스와 스레드
- 프로세스란
    - 운영체제로부터 자원을 할당받은 작업의 단위
    - 메모리상에서 실행중인 프로그램의 작업 단위
- 스레드란
    - 프로세스 안에서 실행되는 여러 흐름 단위
    - 프로세스가 할당받은 자원을 이용하는 실행 흐름의 단위
- 프로세스 구성
    - Code : 코드 자체를 구성하는 메모리 영역(프로그램 명령)
    - Data : 전역변수, 정적변수, 배열 등(초기화된 데이터)
    - Heap : 동적 할당 시 사용 (new(), malloc() 등)
    - Stack : 지역변수, 매개변수, 리턴 값 (임시 메모리 영역)

    ![https://user-images.githubusercontent.com/47655983/111906978-a7ceaf80-8a96-11eb-8a85-9306f98e8517.png](https://user-images.githubusercontent.com/47655983/111906978-a7ceaf80-8a96-11eb-8a85-9306f98e8517.png)

    - 스레드는 Stack만 따로 할당 받고 나머지 영역은 서로 공유
    - 하나의 프로세스가 생성될 때, 기본적으로 하나의 스레드 같이 생성
    - 프로세스는 자신만의 고유 공간과 자원을 할당받아 사용하는데 반해, 스레드는 다른 스레드와 공간, 자원을 공유하면서 사용하는 차이가 존재함
- 멀티프로세스
    - 하나의 컴퓨터에 여러 CPU 장착 → 하나 이상의 프로세스들을 동시에 처리(병렬)
    - 장점 : 안정성 (메모리 침범 문제를 OS 차원에서 해결)
    - 단점 : 각각 독립된 메모리 영역을 갖고 있어, 작업량 많을수록 오버헤드 발생. Conext Switching으로 인한 성능 저하
- Context Switching
    - 프로세스의 상태 정보를 저장하고 복원하는 일련의 과정
    - 동작 중인 프로세스가 대기하면서 해당 프로세스의 상태를 보관하고, 대기하고 있던 다음 순번의 프로세스가 동작하면서 이전에 보관했던 프로세스 상태를 복구하는 과정
- 멀티 스레드
    - 하나의 응용 프로그램에서 여러 스레드를 구성해 각 스레드가 하나의 작업을 처리하는 것
    - 스레드들이 공유 메모리를 통해 다수의 작업을 동시에 처리하도록 해줌
    - 장점 : 독립적인 프로세스에 비해 공유 메모리만큼의 시간, 자원 손실이 감소 / 전역 변수와 정적 변수에 대한 자료 공유 가능
    - 단점 : 안전성 문제. 하나의 스레드가 데이터 공간을 망가뜨리면, 공유 메모리를 갖기 때문에 모든 스레드가 작동 불능 상태가 됨
    - 멀티 스레드의 안전성에 대한 단점은 `Critical Section` 기법을 통해 대비
        - 하나의 스레드가 공유 데이터 값을 변경하는 시점에 다른 스레드가 그 값을 읽으려 할 때 발생하는 문제를 해결하기 위한 동기화 과정

        > 상호 배제, 진행, 한정된 대기를 충족해야함

## 인터럽트(Interrupt)
- 인터럽트란
    - 프로그램을 실행하는 도중에 예기치 않은 상황이 발생할 경우 현재 실행 중인 작업을 즉시 중단하고, 발생된 상황을 우선 처리한 후 실행 중이던 작업으로 복귀하여 계속 처리하는 것
    - 지금 수행중인 일보다 더 중요한 일(입출력, 우선순위 연산 등)이 발생하면 그 일을 먼저 처리하고 나서 하던 일을 계속해야한다.
- 외부 인터럽트
    - 입출력 장치, 타이밍 장치, 전원 등 외부적인 요인으로 발생
    - 전원 이상, 기계 착오, 외부 신호, 입출력
    - CPU의 하드웨어 신호에 의해 발생
- 내부 인터럽트
    - Trap이라고 부르며, 잘못된 명령이나 데이터를 사용할 때 발생
    - 0으로 나누기가 발생, 오버플로우, 명령어를 잘못 사용한 경우(Exception)
    - CPU의 하드웨어 신호에 의해 발생
- 소프트웨어 인터럽트
    - 프로그램 처리 중 명령의 요청에 의해 발생한 것 (SVC 인터럽트)
    - 사용자가 프로그램을 실행시킬 때 발생
    - 소프트웨어 이용 중에 다른 프로세스를 실행시키면 시분할 처리를 위해 자원 할당 동작이 수행
    - 명령어의 수행에 의해 발생
- 컨트롤러가 입력을 받아들이는 방법 (우선순위 판별방법)
    - 폴링 방식
        - 사용자가 명령어를 사용해 입력 핀의 값을 게속 읽어 변화를 알아내는 방식
        - 인터럽트 요청 플래그를 차례로 비교하여 우선순위가 가장 높은 인터럽트 자원을 찾아 이에 맞는 인터럽트 서비스 루틴을 수행한다.(하드웨어에 비해 속도 느림)
    - 인터럽트 방식
        - MCU 자체가 하드웨어적으로 변화를 체크하여 변화 시에만 일정한 동작을 하는 방식
            - Daisy Chain
            - 병렬 우선순위 부여
        - 인터럽트 방식은 하드웨어로 지원을 받아야 하는 제약이 있지만, 폴링에 비해 신속하게 대응하는 것이 가능. 실시간 대응이 필요할 때는 필수적인 기능

## PCB와 Context Switching
- PCB(Process Control Block)란
    - 운영체제가 프로세스를 제어하기 위해 정보를 저장해 놓는 곳으로, 프로세스의 상태 정보를 저장하는 구조체
    - 프로세스 상태 관리와 문맥교환(Context Switching)을 위해 필요
    - PCB는 프로세스 생성 시 만들어지며 주기억장치에 유지
    - PCB에는 Process Metadata라는 프로세스들의 특징 정보가 저장 됨
    - Process Metadata
        - Process ID
        - Process State
        - Process Priority
        - CPU Registers
        - Owner
        - CPU Usage
        - Memory Usage
    - 문맥교환(Context Switching)이란
        - CPU가 이전의 프로세스 상태를 PCB에 보관하고, 또 다른 프로세스의 정보를 PCB에 읽어 레지스터에 적재하는 과정
        - 인터럽트가 발생하거나, 실행 중인 CPU 사용 허가시간을 모두 소모하거나, 입출력을 위해 대기해야 하는 경우에 발생

## IPC(Inter Process Communication)
- IPC(Inter Process Communication)란
    - 운영체제 상에서 실행 중인 프로세스 간에 정보를 주고 받는 것
- IPC 종류
    - 익명 PIPE
    - Named PIPE(FIFO)
    - Message Queue
    - 공유 메모리
    - 메모리 맵
    - 소켓

## System Call
- 시스템 호출(System Calls)
    - 커널 영역의 기능을 사용자 모드가 사용 가능하게, 즉 프로세스가 하드웨어에 직접 접근해서 필요한 기능을 사용할 수 있게 해주는 인터페이스
    - 시스템 호출의 유형
        - 프로세스 제어(Process Control)
        - 파일 조작(File Manipulation)
        - 장치 관리(Device Management)
        - 정보 유지(Information maintenance)
        - 통신(Communication)